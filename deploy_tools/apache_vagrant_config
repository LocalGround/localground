<VirtualHost *:80>
    DocumentRoot /localground
    #ServerName localground

    # ------------------------------------------------------------------
    # For serving user-generated media (images, audio, data, etc.)
    # Be sure to install and enable mod_xsendfile, for basic static file
    # security (https://tn123.org/mod_xsendfile/)
    # ------------------------------------------------------------------
    WSGIPassAuthorization On
    XSendFile on
    XSendFilePath /localground/userdata
    <Directory "/localground/userdata">
       Require all denied
    </Directory>

    # --------------------------------------
    # For static files (css, js, and images)
    #---------------------------------------

    Alias /static/ "/localground/static/"
    <Directory "/localground/static">
        Options +FollowSymlinks
        Options Indexes
        Require all granted
        IndexOptions FancyIndexing
    </Directory>

    # -------------------
    # To make Django work
    # -------------------
    WSGIScriptAlias / "/localground/apache/app_config.wsgi"
    WSGIPassAuthorization On
    <Directory "/localground/apache">
        Require all granted
    </Directory>

</VirtualHost>

<VirtualHost *:80>
    ServerName sd.localground.org
    ProxyPreserveHost On
    ProxyRequests Off
    <Proxy sd.localground.org>
        Require all granted
    </Proxy>
    ProxyPassMatch /data/(\d+)/(\w+)/websocket ws://127.0.0.1:9999/data/$1/$2/websocket
    ProxyPass /data/info http://127.0.0.1:9999/data/info
    ProxyPassReverse /data/info http://127.0.0.1:9999/data/info
    ProxyPass /settings.js http://127.0.0.1:9999/settings.js
    ProxyPassReverse /settings.js http://127.0.0.1:9999/settings.js
    ProxyVia On
</VirtualHost>
