<!-- VIEW MODE -->
{{#ifequal mode "view"}}
{{#compare screenType "presentation" operator="!="}}
<h4>Preview</h4>
{{/compare}}
    {{#if mobileMode}}
        <div class='parallax black touchevents parallax-contracted' {{#unless hasPhotos}}style="z-index: -100"{{/unless}}data-target-top='0%'>
            <div class="top-section">
                {{#if video_photo_count }}
                    <div class="mobile-carousel carousel-videos-photos"></div>
                {{/if}}
            </div>
        </div>

        <div class="parallax body no-touchevents parallax-contracted" id="parallax-body" data-target-top="50%" style="color: #{{paragraph.color}}; background-color: #{{paragraph.backgroundColor}}">
            <div class="circle-wrapper">
                <button class="circle" style="background-color: #{{title.backgroundColor}}">
                    <i class="fa fa-angle-up fa-3x circle-icon" style="color: #{{paragraph.backgroundColor}}" aria-hidden="true"></i>
                </button>
            </div>
            <div class="contracted">
                    {{#if hasPhotoOrAudio}}
                        <div class="min-thumbnail" style="background-image: url({{thumbnail.path_medium}}); background-color: {{paragraph.color}}">
                            {{#if hasAudio}}
                                <div class="thumbnail-play-circle">
                                    <i class="fa fa-play fa-3x thumbnail-play" aria-hidden="true"></i>
                                </div>
                            {{/if}}
                        </div>
                    {{/if}}
                <div class="header-info">
                    <h3 id="drag-header" style="color: #{{paragraph.color}}; font-family: {{paragraph.font}}">{{ name }}</h3>
                </div>
            </div>
            <div class="expanded" style='display:none;'>
                <div class="mobile-wrapper">
                        <section class="first mobile-section" style="color: #{{title.color}}; background-color: #{{title.backgroundColor}}">
                            <div class="header-info">
                                <h3 id="drag-header" style="color: #{{title.color}}; font-family: {{title.font}}">{{ name }}</h3>
                            </div>
                        </section>
                        <section class="second mobile-section">
                            {{#if fields }}
                            <table class="preview-properties" style="color: #{{paragraph.color}}; font-family: {{paragraph.font}}; border-color: #{{paragraph.color}}">
                            {{#each fields}}
                                <tr>
                                    <td>{{ this.col_alias }}:</td>
                                    <td>{{ this.val }}</td>
                                </tr>
                            {{/each}}
                            {{#if tags}}
                                <tr>
                                    <td></td>
                                    <td>
                                        {{#each tags}}
                                            <a class="tag"> {{this}} </a>
                                        {{/each}}
                                    </td>
                                </tr>
                            {{/if}}
                            </table>
                            {{else}}
                            <div class="tag-container">
                                {{#each tags}}
                                <a class="tag"> {{this}} </a>
                                {{/each}}
                        </div>
                        {{/if}}
                        <div class="section">
                            {{#if audio_count }}
                            <div class="carousel carousel-audio" style="background-color: #{{paragraph.backgroundColor}}">
                            </div>
                            {{/if}}
                        </div>
                    </div>
            </div>
        </div>
    {{else}}
        <div class="section">
            <div class="min-thumbnail" style="background-image: url({{thumbnail.path_medium}})">
                {{#if hasAudio}}
                <div class="thumbnail-play-circle">
                    <i class="fa fa-play fa-3x thumbnail-play" aria-hidden="true"></i>
                </div>
                {{/if}}
            </div>
            <div class="header-info">
                <h3 style="color: #{{paragraph.color}}; font-family: {{paragraph.font}}">{{ name }}</h3>
            </div>
        </div>

        <div class="section">

            {{#if featuredImage}}
                <img class="photo featured-photo" src='{{featuredImage.path_medium}}'>
            {{/if}}
            {{#if caption }}
                <p style="font-style: italic">{{ caption }}</p>
            {{/if}}
            {{#if video_photo_count }}
                <div class="carousel carousel-videos-photos" style="background-color: #{{paragraph.backgroundColor}}"></div>
            {{/if}}
            {{#if audio_count }}
                <div class="carousel carousel-audio" style="background-color: #{{paragraph.backgroundColor}}"></div>
            {{/if}}
        </div>
        {{#if fields }}
            <div class="section">
                <table class="preview-properties" style="color: #{{paragraph.color}}; font-family: {{paragraph.font}}; border-color: #{{paragraph.color}}">
                {{#each fields}}
                    <tr>
                        <td>{{ this.col_alias }}:</td>
                        <td>{{ this.val }}</td>
                    </tr>
                {{/each}}
                {{#if tags}}
                    <tr>
                        <td></td>
                        <td>
                            {{#each tags}}
                                <a class="tag"> {{this}} </a>
                            {{/each}}
                        </td>
                    </tr>
                {{/if}}
                </table>
            {{else}}
                <div class="tag-container">
                {{#each tags}}
                    <a class="tag"> {{this}} </a>
                {{/each}}
                </div>
            </div>
        {{/if}}
        <button class="button button-tertiary streetview">Show Street View</button>

        {{#compare screenType "presentation" operator="!="}}
            <div class="save-options">
                <button class="edit-mode button-tertiary">Edit</button>
            </div>
        {{/compare}}

    {{/if}}

{{/ifequal}}


<!-- EDIT MODE -->
{{#ifequal mode "edit"}}
    <h4>{{#if id}}Edit{{else}}Add New{{/if}}</h4>

    {{#ifequal screenType "map"}}
        {{#if geometry}}
            <button class="button-secondary delete-marker-button" id="delete-geometry">Remove Location Marker</button>
        {{else}}
            <div class="add-lat-lng">
                <button class="button-secondary add-marker-button" id="add-geometry">Add Location Marker</button>
            </div>
            <div class="geometry-options" style="display: none">
                <div class="geometry-list-wrapper">
                    <div id="add-point">
                        <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="Circle" fill="#818181">
                                    <circle id="Oval-Copy-6" cx="12" cy="12" r="8"></circle>
                                </g>
                            </g>
                        </svg>                       
                        <span>POINT</span>
                    </div>
                    <div id="add-polyline">
                        <svg width="25px" height="25px" viewBox="0 0 25 25">
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="Polyline" stroke="#818181">
                                    <path d="M3.5,21.5 L7.5,14.5" id="Line" stroke-linecap="square"></path>
                                    <path d="M18.5,11.5 L21.5,4.5" id="Line-Copy-2" stroke-linecap="square"></path>
                                    <path d="M11.0961538,12.75 L15.9038462,12.25" id="Line-Copy" stroke-linecap="square"></path>
                                    <circle id="Oval-Copy-2" fill="#FFFFFF" cx="3" cy="22" r="2"></circle>
                                    <circle id="Oval-Copy-4" fill="#FFFFFF" cx="9" cy="13" r="2"></circle>
                                    <circle id="Oval-Copy-6" fill="#FFFFFF" cx="22" cy="3" r="2"></circle>
                                    <circle id="Oval-Copy-5" fill="#FFFFFF" cx="18" cy="12" r="2"></circle>
                                </g>
                            </g>
                        </svg>
                        <span>LINE</span>
                    </div>
                    <div id="add-polygon">
                        <svg width="25px" height="25px" viewBox="0 0 25 25" version="1.1">
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="Polygon" stroke="#818181">
                                    <path d="M4.5,20.5 L10.5,5.5" id="Line" stroke-linecap="square"></path>
                                    <path d="M17.5,17.5 L21.5,7.5" id="Line-Copy-3" stroke-linecap="square"></path>
                                    <path d="M18.5,6.5 L13.5,4.5" id="Line-Copy-2" stroke-linecap="square"></path>
                                    <path d="M6.09615385,20.75 L16.5,19.5" id="Line-Copy" stroke-linecap="square"></path>
                                    <circle id="Oval-Copy-2" fill="#FFFFFF" cx="4" cy="21" r="2"></circle>
                                    <circle id="Oval-Copy-4" fill="#FFFFFF" cx="17" cy="19" r="2"></circle>
                                    <circle id="Oval-Copy-6" fill="#FFFFFF" cx="12" cy="4" r="2"></circle>
                                    <circle id="Oval-Copy-5" fill="#FFFFFF" cx="21" cy="8" r="2"></circle>
                                </g>
                            </g>
                        </svg>
                        <span>POLYGON</span>
                    </div>
                </div>
            </div>
        {{/if}}
        {{#if lat }}
            <div class="latlong-container">
            <p class="latlong" style="font-style: italic">
                ({{lat}}, {{lng}})
            </p>
            </div>
        {{/if}}
    {{/ifequal}}

    <div id="model-form"></div>

    <button class="button button-tertiary streetview">Show Street View</button>

    <div class = "save-options">
        <button class="save-model button-primary pull-right">Save</button>
        <button class="view-mode button-tertiary" id="preview">Preview</button>
        <button class="button-tertiary button-warning delete-model" id="delete">Delete</button>
    </div>
{{/ifequal}}

{{#ifequal screenType "map"}}
    <div class="show-hide hide"></div>
{{/ifequal}}
